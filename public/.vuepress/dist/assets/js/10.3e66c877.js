(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{429:function(e,t,a){"use strict";a.r(t);var r=a(53),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"design-thinking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#design-thinking"}},[e._v("#")]),e._v(" Design Thinking")]),e._v(" "),a("p",[e._v("Welcome to the official documentation and extended readme of Horizon - a student project at the Stuttgart Media University in collaboration with Adesso.")]),e._v(" "),a("p",[e._v("Horizon was designed and developed to enable fleet management enterprises to optimize their truck management by saving costs due to data analysis and engineering.")]),e._v(" "),a("p",[e._v("Horizon was build on the basis of two processes:")]),e._v(" "),a("ol",[a("li",[e._v("The Design Thinking Process")]),e._v(" "),a("li",[e._v("The Data Driven Decision Making Process / Cross-industry standard process for data mining (CRISP-DM)")])]),e._v(" "),a("p",[e._v("Both processes where necessary to not only work with the data, but also ideate and develop ideas for the final product - the fleet dashboard.")]),e._v(" "),a("p",[e._v("The Design Thinking Process was mainly used in the beggining to understand the task and scope of the project. It also was later used in an iterative way to check whether the development still suits for the task and the predescribed use-case.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/design_thinking.png",alt:"Desgin Thinking Process"}})]),e._v(" "),a("h1",{attrs:{id:"design-thinking-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#design-thinking-2"}},[e._v("#")]),e._v(" Design Thinking")]),e._v(" "),a("h2",{attrs:{id:"_1-business-understanding"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-business-understanding"}},[e._v("#")]),e._v(" 1. Business Understanding")]),e._v(" "),a("p",[e._v("The CRISP-DM process is shown below and mainly used for the backend development process:")]),e._v(" "),a("p",[a("img",{attrs:{src:"/CRISP_DM.png?raw=true",alt:"CRISP"}})]),e._v(" "),a("p",[e._v("*"),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Cross-industry_standard_process_for_data_mining#/media/File:CRISP-DM_Process_Diagram.png",target:"_blank",rel:"noopener noreferrer"}},[e._v("Source of the original image"),a("OutboundLink")],1)]),e._v(" "),a("h1",{attrs:{id:"research-design-thinking-methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#research-design-thinking-methods"}},[e._v("#")]),e._v(" Research & Design Thinking Methods")]),e._v(" "),a("p",[a("strong",[e._v("Responsible: Jan Anders, Felix Bieswanger, Sebastian Hermann, David Rundel & Anja Stütz")])]),e._v(" "),a("h2",{attrs:{id:"understanding-the-scope"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#understanding-the-scope"}},[e._v("#")]),e._v(" Understanding the Scope")]),e._v(" "),a("p",[e._v("Horizon is a student project based on concrete, predefinied tasks. The main goal is to optimize the costs of truck fleets by means of data analysis and a dashboard. In order to work as realistically as possible, the task was seen as the assignment of a fictional company. Accordingly, we as a group find ourselves in the role of the consultants who develop a product for this company.")]),e._v(" "),a("p",[a("strong",[e._v("Current situation at the fleet enterprise")])]),e._v(" "),a("p",[e._v("The existing communication channel in the company provides for a driver to report current events to the fleet managers, who in turn respond with instructions.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/fleet_situation?raw=true",alt:"Fleet Situation"}})]),e._v(" "),a("p",[e._v("In the past, the fleet manager had little overview of the current position and situation of the trucks. A newly introduced telemetry module (represented by a simulation in the project) in the trucks now allows the transmission of important information about the position and situation of the truck to the head office. However, up to now the control center can hardly do anything with this information and therefore needs a suitable dashboard and data modeling.")]),e._v(" "),a("h3",{attrs:{id:"task"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#task"}},[e._v("#")]),e._v(" Task")]),e._v(" "),a("p",[a("strong",[e._v("The following predefined Tasks were given")]),e._v(":")]),e._v(" "),a("ul",[a("li",[e._v("Dashboard design for data visualization after expansion of an existing database with two options:")]),e._v(" "),a("li",[e._v('Option 1: Batch analysis and creation of a dashboard for the user "fleet management" as well as selection and application of a DM clustering algorithm')]),e._v(" "),a("li",[e._v('Option 2: Real-time analysis and creation of a dashboard for the users "fleet management" and "drivers" (indirect) as well as selection and application for real-time visual monitoring')])]),e._v(" "),a("p",[e._v("To fit the scope and the predefined use-case of the fleet enterprise, option two was chosen.")]),e._v(" "),a("p",[a("strong",[e._v('"Real-time analysis and creation of a dashboard for the users "fleet management" and "drivers" (indirect) as well as selection and application for visual monitoring in real time".')])]),e._v(" "),a("h3",{attrs:{id:"research"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#research"}},[e._v("#")]),e._v(" Research")]),e._v(" "),a("p",[e._v("In order to understand the scope of the project better and to bring all team members up to the same level, design thinking methods were applied first.")]),e._v(" "),a("p",[e._v("To get a first impression, Brainstorming was chosen as the first method. The results are presented below. The brainstorming was created on the topic of fleet management and trucks as well as for dashboards in this area.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/fleet_dashboard.png?raw=true",alt:"Brainstorming Fleet Management"}})]),e._v(" "),a("p",[a("img",{attrs:{src:"/fleet_management.png?raw=true",alt:"Brainstorming Fleet Dashboard"}})]),e._v(" "),a("p",[e._v("Based on the results of the brainstorming an extensive literature research was conducted. The results are listed and cited at the appropriate place in the description of the simulation.")]),e._v(" "),a("p",[e._v("In addition to the literature research, competing products were also considered and analysed.")]),e._v(" "),a("h2",{attrs:{id:"evaluation-of-other-fleet-management-products"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#evaluation-of-other-fleet-management-products"}},[e._v("#")]),e._v(" Evaluation of other fleet management products")]),e._v(" "),a("p",[e._v("To understand the current state of the art other fleet management products were evaluated.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Product")]),e._v(" "),a("th",[e._v("Website")]),e._v(" "),a("th",[e._v("Some of the Services")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Carano Software Solutions")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://www.carano.de/fleet-fuhrparksoftware/?gclid=Cj0KCQjw17n1BRDEARIsAFDHFewogEtD8ZFeJbRqEqwj0jlFWKkffA-nJccrchcA-L7SzfZbTUeR55EaAkHiEALw_wcB",target:"_blank",rel:"noopener noreferrer"}},[e._v("Access Website"),a("OutboundLink")],1)]),e._v(" "),a("td",[e._v("Data handling  and  management; Cost  management  and  controlling; Dashboards as well as fuel data management")])]),e._v(" "),a("tr",[a("td",[e._v("VIMCAR Fleet")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://vimcar.de/flottenmanagement/kostenmanagement",target:"_blank",rel:"noopener noreferrer"}},[e._v("Access Website"),a("OutboundLink")],1)]),e._v(" "),a("td",[e._v("Cost  management  and  comparison; Fuel data management; Recommendations  for  cost  efficency; Hint  for  irregulatories")])]),e._v(" "),a("tr",[a("td",[e._v("TRIBMLE")]),e._v(" "),a("td",[a("a",{attrs:{href:"https://www.trimbletl.com/de/kraftstoff/fahrverhalten-und-coaching/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Access Website"),a("OutboundLink")],1)]),e._v(" "),a("td",[e._v("Flexible KPI; Driver comparisons  and  analysis  of  the  driver; Consumption; Coach assistant  for  recommendations; Onboard driver scorecard")])])])]),e._v(" "),a("h2",{attrs:{id:"stakeholders"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stakeholders"}},[e._v("#")]),e._v(" Stakeholders")]),e._v(" "),a("p",[e._v("To understand the requirements of a fleet-management dashboard better, different stakeholders were considerd.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/stakeholders.png?raw=true",alt:"Stakeholders"}})]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Narrow Stakeholders")]),e._v(" "),a("th",[e._v("Tasks")]),e._v(" "),a("th",[e._v("Goals & Interests")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Manager")]),e._v(" "),a("td",[e._v("Management of the enterprise; Specifies KPI and targets")]),e._v(" "),a("td",[e._v("High profit; Cost reduction; Satisfied customers; Fast and efficient deliveries and processes; Hates: Unnecessary costs and dissatisfied customers")])]),e._v(" "),a("tr",[a("td",[e._v("Truck Driver")]),e._v(" "),a("td",[e._v("Drives the trucks; Monitors loading and unloading")]),e._v(" "),a("td",[e._v("Delivering goods successfully and safely, Hates: Incidents")])]),e._v(" "),a("tr",[a("td",[e._v("Fleet-Manager")]),e._v(" "),a("td",[e._v("Monitors truck movements and KPI; controls and coordinates; gives recommendations for action")]),e._v(" "),a("td",[e._v("Getting trucks to their destination efficiently and cost-savingly")])])])]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Broad Stakeholders")]),e._v(" "),a("th",[e._v("Tasks")]),e._v(" "),a("th",[e._v("Goals & Interests")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Controlling")]),e._v(" "),a("td",[e._v("Monitors finances and budget; Takes care of orders")]),e._v(" "),a("td",[e._v("Save money; Highest possible profits for the company")])]),e._v(" "),a("tr",[a("td",[e._v("Mechanic")]),e._v(" "),a("td",[e._v("Fleet maintenance; Maintenance and repair")]),e._v(" "),a("td",[e._v("Safe and functional trucks")])]),e._v(" "),a("tr",[a("td",[e._v("Customer")]),e._v(" "),a("td",[e._v("Gives orders and money")]),e._v(" "),a("td",[e._v("On-time and safe delivery; Damage free delivery; Cheap delivery")])]),e._v(" "),a("tr",[a("td",[e._v("Legislator")]),e._v(" "),a("td",[e._v("Specifies working conditions and requirements for trucks and companies")]),e._v(" "),a("td",[e._v("Respect for workers' rights; respect for rights for the benefit of the State, society and other road users")])]),e._v(" "),a("tr",[a("td",[e._v("Environment")]),e._v(" "),a("td",[e._v("Clear air, compliance with environmental zones and legal regulations")]),e._v(" "),a("td",[e._v("Minimization of fine dust, particles and other pollutants")])])])]),e._v(" "),a("h2",{attrs:{id:"personas"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#personas"}},[e._v("#")]),e._v(" Personas")]),e._v(" "),a("p",[e._v("Besides the client, the head of the company, the main users, the fleet managers, and the drivers are the direct stakeholders. Due to their importance for the project, personas have been created for the latter to identify their motives and requirements.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/personas.png?raw=true",alt:"Personas"}})]),e._v(" "),a("p",[a("a",{attrs:{href:"https://caluma.jobs/buerokaufmann-buerokauffrau-buchen/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Source of the Fleet-Manager image"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://www.swp.de/imgs/07/4/4/9/8/1/3/6/4/tok_d991bb979b440eb25843010381759642/w1176_h662_x750_y500_5bcd70995e288122.jpeg",target:"_blank",rel:"noopener noreferrer"}},[e._v("Source of the Truck Driver image"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"evaluation-of-kpis-and-cost-factors-of-fleet-management-enterprises"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#evaluation-of-kpis-and-cost-factors-of-fleet-management-enterprises"}},[e._v("#")]),e._v(" Evaluation of KPIs and cost factors of fleet management enterprises")]),e._v(" "),a("p",[e._v("Based on researches of the average costs of fleet management enterprises in 2018 ("),a("a",{attrs:{href:"http://www.bgl-ev.de/web/der_bgl/informationen/branchenkostenentwicklung.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("Source"),a("OutboundLink")],1),e._v("), brainstorming and market analysis the following key performance indices were derived:")]),e._v(" "),a("h1",{attrs:{id:"data-source"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-source"}},[e._v("#")]),e._v(" Data Source")]),e._v(" "),a("h2",{attrs:{id:"_2-data-understanding"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-data-understanding"}},[e._v("#")]),e._v(" 2. Data Understanding")]),e._v(" "),a("p",[e._v("Responsible: Anja Stütz, Jan Anders, David Rundel")]),e._v(" "),a("p",[e._v("Firstly, a data source had to be found which delivers realistic and arbitrary amount of real time streaming data of a truck fleet.\n"),a("a",{attrs:{href:"https://github.com/fleetSim/trucksimulation",target:"_blank",rel:"noopener noreferrer"}},[e._v("FleetSim"),a("OutboundLink")],1),e._v(" was found to be a suitable base simulation which could be extended to deliver the required data fields and amounts.")]),e._v(" "),a("p",[e._v("The original fleetSim simulation was extended in three important ways:")]),e._v(" "),a("ul",[a("li",[e._v("Important variables, physical and random effects were added to make the simulation more realistic.")]),e._v(" "),a("li",[e._v("Each simulated truck is able to stream updates of its movements to a kafka server.")]),e._v(" "),a("li",[e._v("A large simulation that runs on predefined routes in endless mode was created.")])]),e._v(" "),a("p",[e._v("More details on the changes made to fleetsim and how to setup fleetsim inside a container can be found "),a("a",{attrs:{href:""}},[e._v("here")]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"description-of-the-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#description-of-the-data"}},[e._v("#")]),e._v(" Description of the data")]),e._v(" "),a("p",[e._v("A typical message from the simulation looks like this:\n"),a("code",[e._v('{"truckCond":1,"timeStamp":1595455986000,"speed":13.05292451466845,"avgIntervSpeed":10.38730585107233, "secSinceLast":120,"acceleration":1.5121130926381294,"bearing":315.8724852614906,"mass":27636.0, "consumption":11.251371489442374,"lat":51.05354230592819,"lon":13.724075328077138,"engineEff":0, "tireEff":0,"truckYear":2014,"truckType":2,"speedWarn":0,"accWarn":1,"brakeWarn":0,"incident":false, "routeId":"5f070923c92647260c2b28e9","tripId":"278JHYXZAW","truckLP":"S HZ 9831", "truckId":"5f070923c92647260c2b28f1","roadType":1,"arrived":0}')])]),e._v(" "),a("p",[e._v("We can see that there are a few data points which help to identify a record.\nSuch are:")]),e._v(" "),a("ul",[a("li",[e._v("truckId (and truckLP - license plate)")]),e._v(" "),a("li",[e._v("routeId")]),e._v(" "),a("li",[e._v("tripId")]),e._v(" "),a("li",[e._v("timeStamp")])]),e._v(" "),a("p",[e._v("Most data points deliver updates on the state the truck is in. Examples for this are:")]),e._v(" "),a("ul",[a("li",[e._v("truckCond")]),e._v(" "),a("li",[e._v("lat and lon (latitude and longitude)")]),e._v(" "),a("li",[e._v("acceleration")])]),e._v(" "),a("h4",{attrs:{id:"data-amounts-and-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-amounts-and-format"}},[e._v("#")]),e._v(" Data amounts and format")]),e._v(" "),a("p",[e._v("The simulation can run at arbitrary speed and can send messages in custom time intervals. There are therefore two controlling settings controlling the amount of messages which are received from the simulation.\nThe amount of milliseconds in real time that are required to pass for one second in the simulation and the message interval in which trucks send in seconds.\nAssuming an interval of 120 seconds with the simulation running in real time, this means that on average, a message from a truck is received every two seconds.")]),e._v(" "),a("p",[e._v("Variables providing information on the state the truck or its components are in are encoded in a three tier system:")]),e._v(" "),a("ul",[a("li",[e._v("0: normal status")]),e._v(" "),a("li",[e._v("1: conspicuous status")]),e._v(" "),a("li",[e._v("2: bad status")])]),e._v(" "),a("p",[e._v("Identifying information is mostly delivered as string. Most other variables are provided in numeric format such as the coordinates, timestamp (unix time) or consumption.")]),e._v(" "),a("h4",{attrs:{id:"data-exploration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-exploration"}},[e._v("#")]),e._v(" Data Exploration")]),e._v(" "),a("p",[e._v("As the focus on the project lied on live streaming data to a dashboard, data exploration was mainly carried out to ensure data quality and consistency.")]),e._v(" "),a("p",[e._v("For a simulation with many trucks and a sufficiently large time-frame of multiple days it was found that moving variables such as speed and acceleration are normally distributed.\nTrucks send their data in reliable intervals and drive on their assigned routes. They commence to a different destination after a random delay (driver gets a break).")]),e._v(" "),a("h3",{attrs:{id:"contributors-to-the-data-source"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contributors-to-the-data-source"}},[e._v("#")]),e._v(" Contributors to the Data Source")]),e._v(" "),a("p",[a("strong",[e._v("Anja Stütz")]),e._v(" and "),a("strong",[e._v("Jan Anders")]),e._v(" were mainly involved in the development of the data source.")]),e._v(" "),a("h2",{attrs:{id:"_3-data-preparation-speed-layer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-data-preparation-speed-layer"}},[e._v("#")]),e._v(" 3. Data Preparation - Speed Layer")]),e._v(" "),a("p",[e._v("Responsible: David Rundel, Jan Anders, Anja Stütz")]),e._v(" "),a("p",[e._v("The following paragraph will focus on the data preparation and aggreagtion as it is performed in the speed layer.\nThis closly represents the Data Preparation phase of the CRISP-DM approach. However, it does not cover the process for selecting relevant variables during development of the solution. A few remarks on this step will be given after the documentation of the speed layer.")]),e._v(" "),a("hr"),e._v(" "),a("h3",{attrs:{id:"input"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#input"}},[e._v("#")]),e._v(" Input")]),e._v(" "),a("p",[e._v("The Speed Layer processes the simulation-data which is consumed from a Kafka-Stream.\nAfter parsing the JSON-data, it gets converted to a pyspark-DataFrame (pyspark.sql.DataFrame).")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('df = spark.readStream.format("kafka") \\\n    .option("kafka.bootstrap.servers", "kafka:9092") \\\n    .option("subscribe", "simulation") \\\n    .load()\n\ndf = df.selectExpr("CAST(value AS STRING)")\n\ndf = df.withColumn("value", from_json("value", schema)) \\\n    .select(col(\'value.*\')) \\\n')])])]),a("h3",{attrs:{id:"transformation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transformation"}},[e._v("#")]),e._v(" Transformation")]),e._v(" "),a("p",[e._v("In the transformation phase, the data goes through several steps: Filtering, Harmonization, Aggregation, Enrichment. The Filtering- and Harmonization-Phase are less needed due to the fact that most of the data comes from the same simulated data source and is pretty much homogeneous. For real world data, this processing step would have to be extended.")]),e._v(" "),a("h4",{attrs:{id:"aggregation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aggregation"}},[e._v("#")]),e._v(" Aggregation")]),e._v(" "),a("p",[e._v("The incoming data-stream gets aggregated by each trip.")]),e._v(" "),a("ul",[a("li",[e._v("Master-data (such as the corresponding route, truck or trip) is saved once.")]),e._v(" "),a("li",[e._v("Moving-data is converted to time series. This enables the resource efficient historization of the data for later use in the Batch Layer. The time series are of use for computing metrics like averages, moving averages (not implemented in the latest version), standard-deviations (not implemented), and for deriving most recent values, which are used in the frontend.")]),e._v(" "),a("li",[e._v("As mentioned above, moving data for which only the last value is of relevance to the frontend is saved in a separate field to be forwarded to the frontend api. Some constantly changing values which are not of importance for machine learning (such as the weather, which currently has no influence on the simulation) are treated the same way to save on resources. In a production environment, it would be a good idea to save everything to the batch database in case this data is needed in the future for different use cases.")])]),e._v(" "),a("p",[e._v("An example of all three aggregation types:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('df_serve = df_serve \\\n    .groupBy(\'tripId\') \\\n    .agg(F.first("truckId").alias("sd_truckId"), \\\n    F.collect_list(\'speed\').alias("ts_speed"), \\\n    F.avg(\'consumption\').alias("agg_last_consumption"))\n')])])]),a("h4",{attrs:{id:"enrichment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enrichment"}},[e._v("#")]),e._v(" Enrichment")]),e._v(" "),a("p",[e._v("Additional master-data is joined, such as the length of each route, to compute metrics like the current progress per trip. The length of each route is a static dataframe that does not require recomputation in the batch-layer. Rather, this dataframe would have to be updated by a route planning system as soon as a new route is entered into the system.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('AS.download_file(save_path, cloud_file_name, container_name)\nroute_dist_pd = pd.read_csv("./route_dist.csv")\nroute_dist = sqlCtx.createDataFrame(route_dist_pd)\ndf_serve = df_serve.join(route_dist, \'sd_routeId\', how=\'left_outer\')\n\n@udf("array<integer>")  \ndef PRODUCE_ts_agg_acc_meters(xs):  \n    if xs:  \n        temp = [int(round(sum(xs[0:i]), 0)) \\\n        for i in (range(1, len(xs) + 1))]  \n        return temp\n    \ndf_serve = df_serve \\\n    .withColumn("ts_agg_acc_meters", \\\n    PRODUCE_ts_agg_acc_meters("ts_meters_intervall"))\n')])])]),a("p",[e._v("Historical aggregates, stemming from the Batch Layer, are used to compute Delta-KPIs. Those fulfill the purpose to better assess current data, when seeing it in relation to values which can be considered normal for each route. For this, similar to joining master data above, aggregation data is joined and then used set current values into comparison. The aggregations are periodically recomputed by the batch layer to ensure that averages are up to date.")]),e._v(" "),a("p",[e._v("External datasources, such as the current weather for each truck, get joined as additional data for the frontend. A custom weather api caller was defined in order to obtain weather codes in concordance with the frontend specification. Additional information, such as a description of the weather, the temperature or humidity would also be available.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('@udf("integer")\ndef get_weather_code_for_location(lat, lon, unix_time):\n    result = Weather.get_weather_for_location(lat, lon, unix_time)\n    return result[0]\n\nif (enrich_weather_data):\n    try:\n        df_serve = df_serve \\\n            .withColumn("weatherCode", \\\n            get_weather_code_for_location("lat","lon","timeStamp"))\n')])])]),a("p",[e._v("Machine Learning Models are used as inference-engines, to enrich the streaming data with predictions, such as the delay per trip. The models are fetched from Azure Blob Storage. A simplified code fragment showing the general process:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('newest_filename, s = AS.get_newest_file(container_name, arrival_file_substring)\nfilepath, s = AS.download_file(save_path, newest_filename, container_name)\narrival_model_path = AS.unzip(".", filepath)\nmodel_arrival = PipelineModel.read().load(arrival_model_path)\ndf_serve = model_arrival.transform(df_serve)\n')])])]),a("h3",{attrs:{id:"output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[e._v("#")]),e._v(" Output")]),e._v(" "),a("p",[e._v("There are two outputs of the Speed Layer.\nA subset of all features (mostly aggregates such as averages or last values and identifying labels) get forwarded to the frontend via an Kafka-Stream.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('df_to_frontend_stream = df_to_frontend \\\n    .writeStream \\\n    .format("kafka") \\\n    .option("kafka.bootstrap.servers", "kafka:9092") \\\n    .option("topic", "frontend") \\\n    .outputMode("Complete") \\\n    .option("checkpointLocation", False) \\\n    .start()\n')])])]),a("p",[e._v("A sample of one message to the frontend:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('{"trip_id":"VA1Z9OT98P","truck_id":"5f070922c92647260c2b2886","number_plate":"S HZ 8245","route_id":"5f070922c92647260c2b287e","truck_mass":14070,"departure":"Muenchen","arrival":"Stuttgart","departure_time":1595456465                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ,"telemetry_timestamp":1595456465                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ,"arrival_time":1595466901,"telemetry_lat":48.16400894659716,"telemetry_lon":11.483320377669836,"truck_speed":13.08,"truck_consumption":6.66,"avg_truck_speed":13.08,"truck_acceleration":-6.07,"avg_truck_acceleration":-6.07,"normal_consumption":6.66,"route_progress":0,"driver_class":1,"delay":-1773,"driver_acceleration":2,"driver_speed":2,"driver_brake":0,"incident":false,"truck_condition":1,"tires_efficiency":0,"engine_efficiency":0,"weather":0,"year":2008,"arrived":0,"truck_type":"LOCAL","driver_duration":0,"road_type":"INTERURBAN","next_service":212,"service_interval":9000}\n')])])]),a("p",[e._v("Secondly, all master data along with all time series is saved to the batch layer, by inserting it into the persistence-layer (Cosmos-DB) in a historized fashion. We decided to insert the already preprocessed and enriched data into the batch-db (and not directly from the simulation) to ensure consistency in terms of enrichment steps. Therefore, the foreachBatch()-Method was used, in order to insert data via the pymongo library.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('def write_to_mongo(df_to_batch, epoch_id):\n    tempdataframe = df_to_batch.toPandas()\n        with pymongo.MongoClient(uri) as client:\n            mydb = client[mongodb_name]\n            sparkcollection = mydb[mongodb_collection]\n            df_json = json.loads(tempdataframe.T.to_json()).values()\n            try:\n                sparkcollection.insert(df_json)\n\ndf_to_batch_stream = df_to_batch.writeStream \\\n    .outputMode("Update") \\\n    .foreachBatch(write_to_mongo) \\\n    .start()\n')])])]),a("p",[e._v("A major hurdle was inserting the label for time series into the database. The dependent variable for the estimated delay prediction is calculated using the accumulated amount of seconds per trip. This value is only available with the last signal for each trip, as soon as a truck has arrived at its destination, but has to be inserted for all previous tuples of the corresponding trip, which have already been saved to the database at that point. Updating the documents in the batch-db has to be done to allow the training of models, eligible of predicting the label for each step of the time series.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('sparkcollection.update_many( \\\n\t        {"tripId": temp_tripId}, \\\n\t\t    {"$set": {"LABEL_final_agg_acc_sec": temp_LABEL}})\n')])])]),a("hr"),e._v(" "),a("p",[e._v("As the data stems from a simulation, data cleaning did not have to be performed.\nHowever, a large problem that was faced during development was the constantly changing nature of the data,\nas the development of the simulation was simultaneous to\nIt would have been better to have a fixed data source from the start. This would have enabled more structured work.\nAs the selected task of the group\nData Set Description\nSelect Data (Rationale for Inclusion / Exclusion)")]),e._v(" "),a("ul",[a("li",[e._v("Auswahl der wichtigen Variablen\nClean Data (Data Cleaning Report)")]),e._v(" "),a("li",[e._v("Ausreisser erkennen, fehlende Werte behandeln\nConstruct Data (Derived Attributes Generated Reports)")]),e._v(" "),a("li",[e._v("Abgeleitete Variablen (Summe oder logische Verknüpfungen)\nIntegrate Data (Merge Data)")]),e._v(" "),a("li",[e._v("Daten aus verschiedenen Tabellen zusammenfüren\nFormat Data (Reformatted Data)")]),e._v(" "),a("li",[e._v("Formatierung (Datenformat (Datum...), Transformation der Daten (normierte Verteilung oder PCA))")])]),e._v(" "),a("hr"),e._v(" "),a("h2",{attrs:{id:"_4-modeling-batch-layer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-modeling-batch-layer"}},[e._v("#")]),e._v(" 4. Modeling - Batch Layer")]),e._v(" "),a("p",[e._v("Responsible: David Rundel")]),e._v(" "),a("p",[e._v("In the modeling phase, we ended up with two models. One supervised, and one unsupervised approach.")]),e._v(" "),a("p",[e._v("We clustered the driver-habits using the spark-proprietary K-Means-Clustering-Algorithm and evaluated the models with Silhouettes. Incremental-Model-Training / Online-Training was considered for the clustering, but could not yet be implemented.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('CL_kmeans = KMeans() \\\n\t    .setK(3) \\\n\t    .setSeed(1) \\\n\t    .setFeaturesCol("scaledFeatures")\n')])])]),a("p",[e._v("Gradient Boosted Trees (GMT) were utilized to regress on the delay per trip and evaluated using the Mean Absolute Error.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('EA_gbt = GBTRegressor(labelCol="label", featuresCol="features")\n')])])]),a("p",[e._v("The GBT-Algorithm was challenged against LSTM-Networks, which held the potential to make better use of Time Series Data. However, while the data is available in time series format, the prediction is a regression task and heavily profits from the ability of GBT to learn different patterns in data. Unfortunately the LSTM, implemented with Keras and Tensoflow as Backend, was not able to achieve better results than the sequentially growing decision trees.\nIn the next iteration of the data science process, it could be tried to predict the delay using a multi model or multi input model approach with LSTM's and dense networks, concatenating several input streams with different dimensionality. This would not only process time-series, but also one-dimensional master data, which turned out to be a good predictor with the GBT. Anyway, the LSTM code can be found in /Backend/Kafka/mvp/batch_layer/NN_Test.py.")]),e._v(" "),a("p",[e._v("For both models, hyperparameters were optimized with the help of a Grid Search. The grid could be extended by further variables if better results are required, it is however more likely that training data amounts and data preparation play a bigger role in the quality of the models.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("EA_paramGrid = ParamGridBuilder() \\\n        .addGrid(EA_gbt.maxDepth, [3, 5, 7]) \\\n        .addGrid(EA_gbt.maxIter, [10, 20, 50, 100]) \\\n        .addGrid(EA_gbt.stepSize, [0.001, 0.01, 0.1, 1]) \\\n        .build()\n")])])]),a("hr"),e._v(" "),a("p",[e._v("Generate Test Design (Test Design)")]),e._v(" "),a("ul",[a("li",[e._v("Wie wird Modelgüte gemessen?")]),e._v(" "),a("li",[e._v("Aufteilung der Daten in Trainings-, Test- und Validierungsmenge\nAssess Model (Model Assessment, Revised Parameter Settings)")]),e._v(" "),a("li",[e._v("Technische Bewertung der Modellgüte ggf. mit anderen Parametern wiederholen")])]),e._v(" "),a("hr"),e._v(" "),a("h1",{attrs:{id:"_2-data-sources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-data-sources"}},[e._v("#")]),e._v(" 2. Data Sources")]),e._v(" "),a("p",[e._v("One of the main goals of the project is to implement a simulation as realistic as possible as a data basis. Ideally, either a data basis with corresponding data quantity and data quality already exists or a simulation that can be extended.")]),e._v(" "),a("h2",{attrs:{id:"evaluation-of-different-data-sources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#evaluation-of-different-data-sources"}},[e._v("#")]),e._v(" Evaluation of different data sources")]),e._v(" "),a("p",[a("strong",[e._v("Responsible: Jan Anders, Felix Bieswanger, Sebastian Hermann, David Rundel & Anja Stütz")])]),e._v(" "),a("p",[e._v("However, the search for data sources posed a greater problem than expected. Either too little data was available, the wrong data or the data basis was not expandable because access to the source code was missing. The following sources were evaluated and taken into consideration:")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Datasource")]),e._v(" "),a("th",[e._v("Explanation")]),e._v(" "),a("th",[e._v("Data Quantaty")]),e._v(" "),a("th",[e._v("Data Quality")]),e._v(" "),a("th",[e._v("Source Code")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Adesso")]),e._v(" "),a("td",[e._v("Simulated telematik dataset from a master thesis")]),e._v(" "),a("td",[e._v("1/5: Dataset to small for the live use-case and the predictions")]),e._v(" "),a("td",[e._v("3.5/5: Useable but neccessary to expand and add some parameter")]),e._v(" "),a("td",[e._v("No: Later in the project yes, but slightly too late to be considered")])]),e._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://sumo.dlr.de",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sumo"),a("OutboundLink")],1)]),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://github.com/javipalanca/simfleet",target:"_blank",rel:"noopener noreferrer"}},[e._v("SimFleet"),a("OutboundLink")],1)]),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://github.com/fleetSim/trucksimulation",target:"_blank",rel:"noopener noreferrer"}},[e._v("fleetSim"),a("OutboundLink")],1)]),e._v(" "),a("td",[e._v("Simulation of a fleet of trucks using vert.x and GraphHopper libraries to let trucks drive routes. Simulated telematic boxes of these trucks then regulary emit data such as GPS-Position, speed, bearing...")]),e._v(" "),a("td",[e._v("3/5: A lot of missing KPI but simulation architecture is really good and expandable")]),e._v(" "),a("td",[e._v("4/5: existing data is quite good and can be adjusted")]),e._v(" "),a("td",[e._v("Yes: MIT Licence and therefore useable and expandable")])])])]),e._v(" "),a("h3",{attrs:{id:"evaluation-of-machine-learning-models"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#evaluation-of-machine-learning-models"}},[e._v("#")]),e._v(" Evaluation of Machine Learning Models")]),e._v(" "),a("p",[e._v("Each parameter combination in our grid is evaluated using  10-Fold-Cross-Validation, due to the fact that is an sufficiently big and decorrelated estimate of our error-metric.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("EA_pipeline=Pipeline().setStages([EA_indexer1,\\\n\t\t\t    EA_indexer2, \\\n\t\t\t    EA_vectorAssembler, \\\n\t\t\t    EA_gbt])\n\nEA_crossval = CrossValidator(estimator=EA_pipeline, \\\n                          estimatorParamMaps=EA_paramGrid, \\\n                          evaluator=RegressionEvaluator(), \\\n                          numFolds=10)\n\nEA_crossval = EA_crossval.fit(sql_df_trips) \nEA_best_model = EA_crossval.bestModel\n")])])]),a("p",[e._v("Lastly, we found an Heteroscedasticity in our prediction-error, meaning that the variance of our error-estimate was not constant. We were not able to eliminate this issue yet.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('jointplot= sns.jointplot(x="label", \\ \n\t\t    y="pred", \\\n\t\t    data=sql_df_trips)\n')])])]),a("h3",{attrs:{id:"evaluation-of-the-horizon-fleet-management-system"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#evaluation-of-the-horizon-fleet-management-system"}},[e._v("#")]),e._v(" Evaluation of the Horizon Fleet Management System")]),e._v(" "),a("p",[e._v("Evaluate Results (Assessment of Data Mining Results, Buisness Success, Criteria, Approved Models)")]),e._v(" "),a("h4",{attrs:{id:"for-a-detailed-description-of-how-to-deploy-horizon-yourself-please-see-the-tab-instructions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-a-detailed-description-of-how-to-deploy-horizon-yourself-please-see-the-tab-instructions"}},[e._v("#")]),e._v(" For a detailed description of how to deploy Horizon yourself, please see the tab "),a("a",{attrs:{href:"/instructions"}},[e._v("Instructions")]),e._v(".")]),e._v(" "),a("p",[e._v("Deployment Plan")]),e._v(" "),a("p",[e._v("Before beginning work on Horizon, Microsoft Azure was chosen as the plattform on which it would later be deployed.\nThis is for two reasons:\nFirstly, Azure is currently shaping to be the main competitor to the industry leading Amazon Web Services and offers a free student credit program, making it well suited for a study project.\nSecondly, while some team-members had previous experience with Googles' Cloud Plattform, another option with a student credit offering, we wanted to gain experience with another solution.")]),e._v(" "),a("p",[e._v("We did not expect that hosting our solution would require as many resources, but in the end the student credit of multiple accounts was fully used up.")]),e._v(" "),a("p",[e._v("Azure Kubernetes Service and Azure Cosmos DB were chosen early in the process as the two main components on which Horizon runs. Subsequent architecture and tool decisions were made accordingly.")]),e._v(" "),a("p",[e._v("After testing parts of the solution in clusters or containers on local machines, the live deployment only required small changes to the general workflow, the largest being heavy wait times while waiting for container images to upload for live testing.")]),e._v(" "),a("p",[e._v("As Horizon was developed as a prototype and underwent constant changes, in addition to the high cost of hosting the service, Horizon did not run online for extendend periods of time. This means that no large database of data for training could be collected.\nMonitoring was therefore not required (and would have cost additional credit). The Batch Database did not reach full capacity and remained below the free tier of 400 RU/s for the duration of the project.")]),e._v(" "),a("p",[e._v("Final Presentation\nDuring the live presentation of the system, Horizon was deployed and the frontend was publicly available.\nGiven that enough funds remain, the Horizon dashboard will be available "),a("a",{attrs:{href:"janders.net/horizon"}},[e._v("here")]),e._v(" as a static application in the first week of August, 2020 for trying out features (such as filter criteria), which could not be shown during the presentation.")]),e._v(" "),a("h2",{attrs:{id:"contributors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contributors"}},[e._v("#")]),e._v(" Contributors")]),e._v(" "),a("p",[a("strong",[e._v("David Rundel")]),e._v(", "),a("strong",[e._v("Felix Bieswanger")]),e._v(" and "),a("strong",[e._v("Jan Anders")]),e._v(" were maily involved in the development of the backend and deployment.")]),e._v(" "),a("h1",{attrs:{id:"frontend"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frontend"}},[e._v("#")]),e._v(" Frontend")]),e._v(" "),a("p",[e._v("This is the official documentation of the frontend of "),a("strong",[e._v("Horizon")]),e._v(". The interactive app visualizes "),a("strong",[e._v("live recommendations")]),e._v(" for fleet managers and truck drivers.")]),e._v(" "),a("h2",{attrs:{id:"getting-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[e._v("#")]),e._v(" Getting Started")]),e._v(" "),a("p",[e._v("The app was created using "),a("a",{attrs:{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[e._v("React.js")]),a("OutboundLink")],1),e._v(". React.js is a Javascript library to create user interfaces. To start the app "),a("strong",[e._v("locally")]),e._v(" you need "),a("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[e._v("node.js")]),a("OutboundLink")],1),e._v(" and "),a("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[e._v("npm")]),a("OutboundLink")],1),e._v(". Node.js is the platform needed for the React.js development.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Step")]),e._v(" "),a("th",[e._v("Description")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("0")]),e._v(" "),a("td",[e._v("Install the latest stable version of "),a("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[e._v("node.js")]),a("OutboundLink")],1),e._v(".")])])])]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("NOTE")]),e._v(": The latest version of "),a("strong",[e._v("node.js")]),e._v(" includes "),a("strong",[e._v("npm")]),e._v(" already. Therefore, npm does not need to be installed separately.")])]),e._v(" "),a("p",[e._v("To run the app on the local machine, navigate in the console to the folder "),a("em",[e._v("DataScienceSS20>Frontend>React-Mockup-v2")]),e._v(". Here, execute the command "),a("code",[e._v("npm start")]),e._v(". A browser window should open automatically after some time (about 20 seconds) and show the application on "),a("em",[e._v("localhost:3000")]),e._v(". If not, open a browser window and enter the address "),a("em",[e._v("localhost:3000")]),e._v(".")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Step")]),e._v(" "),a("th",[e._v("Description")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("1")]),e._v(" "),a("td",[e._v("In the console, navigate to the folder "),a("em",[e._v("DataScienceSS20>Frontend>React-Mockup-v2")])])]),e._v(" "),a("tr",[a("td",[e._v("2")]),e._v(" "),a("td",[e._v("In "),a("em",[e._v("React-Mockup-v2")]),e._v(", execute the command "),a("code",[e._v("npm start")])])])])]),e._v(" "),a("p",[e._v("At this point you should be able to see the running application.\n"),a("img",{attrs:{src:"/frontend1.png?raw=true",alt:"Horizon Frontend"}})]),e._v(" "),a("h2",{attrs:{id:"general-principles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#general-principles"}},[e._v("#")]),e._v(" General Principles")]),e._v(" "),a("p",[e._v("The guideline for the creation of the application was to translate the complex calculations of the backend to live "),a("strong",[e._v("recommendations")]),e._v(" for action for the target groups "),a("strong",[e._v("truck drivers")]),e._v(" and "),a("strong",[e._v("fleet managers")]),e._v(". Accordingly, the application focuses on the presentation of "),a("strong",[e._v("live")]),e._v(" data.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend2.png?raw=true",alt:"Horizon: Structure of the application"}})]),e._v(" "),a("p",[e._v("The application can be divided into "),a("strong",[e._v("four areas")]),e._v(": the "),a("strong",[e._v("filter")]),e._v(" bar (1), the "),a("strong",[e._v("list of currently driving truck")]),e._v(" (2), the "),a("strong",[e._v("map overview")]),e._v(" (3) and the "),a("strong",[e._v("detail view")]),e._v(" (4) for a selected truck. The four areas are presented below.")]),e._v(" "),a("h3",{attrs:{id:"filter-bar"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filter-bar"}},[e._v("#")]),e._v(" Filter Bar")]),e._v(" "),a("p",[e._v("The filter bar is used to "),a("strong",[e._v("limit the view")]),e._v(" of the trucks according to various criteria. This gives the fleet manager a "),a("strong",[e._v("faster overview")]),e._v(" of all trucks and at the same time allows him to view critical trucks "),a("strong",[e._v("more quickly")]),e._v(".")]),e._v(" "),a("p",[e._v("The current version allows two filter criteria: the restriction of the "),a("strong",[e._v("delay range")]),e._v(" and a switch to filter only those trucks that show "),a("strong",[e._v("anomalies")]),e._v(", "),a("strong",[e._v("warnings")]),e._v(" or "),a("strong",[e._v("urgent messages")]),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"list-of-currently-driving-trucks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#list-of-currently-driving-trucks"}},[e._v("#")]),e._v(" List of Currently Driving Trucks")]),e._v(" "),a("p",[e._v("This overview lists all trucks that match the filter criteria. All information that might be of particular interest to the fleet manager at first glance is displayed. The following graphic shows the structure of an individual truck card.\n"),a("img",{attrs:{src:"/frontend3.png?raw=true",alt:"Horizon: List of currentl driving trucks"}})]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Nr.")]),e._v(" "),a("th",[e._v("Description")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("1")]),e._v(" "),a("td",[a("strong",[e._v("Number plate")]),e._v(" of the respective truck")])]),e._v(" "),a("tr",[a("td",[e._v("2")]),e._v(" "),a("td",[a("strong",[e._v("Route")]),e._v(" from start to destination")])]),e._v(" "),a("tr",[a("td",[e._v("3")]),e._v(" "),a("td",[e._v("The amount of "),a("strong",[e._v("delay")]),e._v(" in minutes")])]),e._v(" "),a("tr",[a("td",[e._v("4")]),e._v(" "),a("td",[e._v("The amount of "),a("strong",[e._v("conspicuous warnings")]),e._v(" in the truck ("),a("em",[e._v("more in Detail View")]),e._v(")")])]),e._v(" "),a("tr",[a("td",[e._v("5")]),e._v(" "),a("td",[e._v("The amount of "),a("strong",[e._v("bad warnings")]),e._v(" in the truck ("),a("em",[e._v("more in Detail View")]),e._v(")")])]),e._v(" "),a("tr",[a("td",[e._v("6")]),e._v(" "),a("td",[e._v("The "),a("strong",[e._v("speed")]),e._v(" of the respective truck")])])])]),e._v(" "),a("h3",{attrs:{id:"map-overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#map-overview"}},[e._v("#")]),e._v(" Map Overview")]),e._v(" "),a("p",[e._v("The map overview shows the "),a("strong",[e._v("location of all trucks")]),e._v(" that match the filter criteria on a map. The Mapbox API is used to display the interactive map. Mapbox is an open source mapping platform for custom designed maps (more information on "),a("a",{attrs:{href:"https://www.mapbox.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.mapbox.com"),a("OutboundLink")],1),e._v("). The individual points on the map represent the locations of the different trucks. In the upper left area, "),a("strong",[e._v("two KPI cards")]),e._v(" are positioned, which give information about the "),a("strong",[e._v("number of delays")]),e._v(" and "),a("strong",[e._v("warnings")]),e._v(" (both conspicuous and bad).\n"),a("img",{attrs:{src:"/frontend4.png?raw=true",alt:"Horizon: Map Overview"}})]),e._v(" "),a("h3",{attrs:{id:"detail-view"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#detail-view"}},[e._v("#")]),e._v(" Detail View")]),e._v(" "),a("p",[e._v("In the detail view, several details of a "),a("strong",[e._v("selected truck")]),e._v(" are displayed. On the one hand, general information on "),a("strong",[e._v("the route and the truck")]),e._v(" is displayed here. On the other hand, concrete recommendations for various warnings that are already indicated in the "),a("em",[e._v("list view")]),e._v(" are displayed in this area.")]),e._v(" "),a("h5",{attrs:{id:"route-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#route-information"}},[e._v("#")]),e._v(" Route Information")]),e._v(" "),a("p",[e._v("The first card shows the selected truck with its departure time and place, planned arrival time and place as well as the current weather and the type of road. The weather information serves to avert the "),a("strong",[e._v("imminent dangers")]),e._v(" associated with "),a("strong",[e._v("slipperiness")]),e._v(", "),a("strong",[e._v("wetness")]),e._v(" or "),a("strong",[e._v("restricted visibility")]),e._v(" as early as possible. The road information helps to better understand the driving behaviour based on the different types of road, as motorways, for example, have different characteristics than country roads.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend5.png?raw=true",alt:"Horizon: Route Information"}})]),e._v(" "),a("h5",{attrs:{id:"driving-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#driving-information"}},[e._v("#")]),e._v(" Driving Information")]),e._v(" "),a("p",[e._v("On the second card, three pieces of information about the current trip are displayed: "),a("strong",[e._v("Speed")]),e._v(", "),a("strong",[e._v("acceleration")]),e._v(" and "),a("strong",[e._v("consumption")]),e._v(". All three pieces of information are compared to average values calculated for the respective route in the speed layer of the backend (for more information see chapter Backend and Architecture). If the current value is higher than the average value of the route, a warning symbol for the corresponding value is displayed.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend6.png?raw=true",alt:"Horizon: Driving Information"}})]),e._v(" "),a("h5",{attrs:{id:"driving-behaviour"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#driving-behaviour"}},[e._v("#")]),e._v(" Driving Behaviour")]),e._v(" "),a("p",[e._v("The third card shows the truck driver's "),a("strong",[e._v("driving behaviour")]),e._v(", from which "),a("strong",[e._v("recommendations")]),e._v(" for action can be derived directly. At the top, centrally positioned, there is a bar chart showing the KPI "),a("strong",[e._v("Eco Status")]),e._v(". "),a("strong",[e._v("Eco Status")]),e._v(" is a key figure calculated from several factors such as "),a("strong",[e._v("speed")]),e._v(", acceleration, etc. which indicates the driving behaviour of the truck driver. The closer the value is to 100%, the better the driver drives. An Eco Status of 100% means that the driver shows a very good driving behaviour and therefore drives very efficiently in terms of costs. A value of 0%, on the other hand, implies an urgent adjustment of the driving behaviour. In order to get a detailed idea of what is wrong with the driving behaviour, there are four more illustrations below. These show concrete recommendations for action which the driver must implement in order to achieve a better eco status. There are three categories:")]),e._v(" "),a("ol",[a("li",[a("strong",[e._v("Normal Behaviour")]),e._v(" (indicated by dark grey colouring)\nArrow points to the right: Behaviour does not have to be adapted.")]),e._v(" "),a("li",[a("strong",[e._v("Conspicuous Behaviour")]),e._v(" (indicated by orange coloring)\nArrow is tilted down 45°: The driving behaviour should be improved.")]),e._v(" "),a("li",[a("strong",[e._v("Bad Behaviour")]),e._v(" (indicated by red colouring)\nArrow is tilted downwards by 90°: Driving behaviour urgently needs to be improved.")])]),e._v(" "),a("p",[e._v('The colours and classifications have a direct reference to the "Conspicious" or "Bad" counters shown in the truck cards.')]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend7.png?raw=true",alt:"Horizon Driving Behaviour"}})]),e._v(" "),a("h5",{attrs:{id:"truck-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#truck-information"}},[e._v("#")]),e._v(" Truck Information")]),e._v(" "),a("p",[e._v("The fourth card shows "),a("strong",[e._v("general information")]),e._v(" about the "),a("strong",[e._v("truck")]),e._v(". Here again, the warnings are in the foreground. Included are warnings about "),a("strong",[e._v("tire status")]),e._v(", "),a("strong",[e._v("engine efficiency")]),e._v(" and "),a("strong",[e._v("truck condition")]),e._v(' in general. The gradations are similar to the "Driving Behavior" map.\nThe example of the '),a("em",[e._v("tire status")]),e._v(" is given below to illustrate the gradations:")]),e._v(" "),a("ol",[a("li",[a("strong",[e._v("Normal Behaviour")]),e._v(" (indicated by dark grey colouring)\nTires are ok.")]),e._v(" "),a("li",[a("strong",[e._v("Conspicuous Behaviour")]),e._v(" (indicated by orange coloring)\nThe tires should be checked.")]),e._v(" "),a("li",[a("strong",[e._v("Bad Behaviour")]),e._v(" (indicated by red colouring)\nThe tyres need to be checked.")])]),e._v(" "),a("p",[e._v("Similarly, the factors "),a("em",[e._v("engine efficiency")]),e._v(" and general "),a("em",[e._v("truck condition")]),e._v(" are graded.")]),e._v(" "),a("p",[e._v("With the information "),a("strong",[e._v("vehicle type")]),e._v(", "),a("strong",[e._v("year")]),e._v(" of manufacture, "),a("strong",[e._v("mass")]),e._v(" and next "),a("strong",[e._v("service")]),e._v(", the fleet manager receives even more detailed information about the truck. This allows him to interpret further conclusions about the "),a("strong",[e._v("driving behaviour")]),e._v(" (e.g. a truck with a larger mass has a different acceleration behaviour than a truck with a lower mass) or the "),a("strong",[e._v("maintenance susceptibility")]),e._v(" (e.g. depending on the age of the truck and the next service due).")]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend8.png?raw=true",alt:"Horizon: Truck Information"}})]),e._v(" "),a("h3",{attrs:{id:"interactivity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#interactivity"}},[e._v("#")]),e._v(" Interactivity")]),e._v(" "),a("p",[e._v("The application provides some interactions that help the user to view the desired information as quickly and efficiently as possible.")]),e._v(" "),a("h4",{attrs:{id:"selection-of-a-truck"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selection-of-a-truck"}},[e._v("#")]),e._v(" Selection of a truck")]),e._v(" "),a("p",[e._v("To select a truck, the user can either click on the map within the list area or select the truck on the map.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend9.png?raw=true",alt:"Horizon: Selection of a truck"}})]),e._v(" "),a("h4",{attrs:{id:"filter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filter"}},[e._v("#")]),e._v(" Filter")]),e._v(" "),a("p",[e._v("As already mentioned, it is possible to filter by the criteria "),a("strong",[e._v("delay")]),e._v(" and "),a("strong",[e._v("warnings")]),e._v(". The selection can be reset to the default value by clicking the "),a("em",[e._v("Clear")]),e._v(" button. You can filter by delays by selecting a delay interval.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend10.png?raw=true",alt:"Horizon: Filter"}})]),e._v(" "),a("p",[e._v("Warnings can be filtered by enabling/disabling the "),a("em",[e._v("Only Warnings")]),e._v(" switcher.")]),e._v(" "),a("h4",{attrs:{id:"helper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#helper"}},[e._v("#")]),e._v(" Helper")]),e._v(" "),a("p",[e._v("Within the detailed overview there are "),a("strong",[e._v("helper icons")]),e._v(" (symbolized as quesion mark icons), which should help the user to "),a("strong",[e._v("get familiar")]),e._v(" with the application "),a("strong",[e._v("faster")]),e._v(". By clicking on the icon, a pop-up window is displayed that explains the elements of the respective card in "),a("strong",[e._v("more detail")]),e._v(" or shows how the individual symbols and colors are to be "),a("strong",[e._v("interpreted")]),e._v(".")]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend11.png?raw=true",alt:"Horizon: Helpertext"}})]),e._v(" "),a("h2",{attrs:{id:"data-source-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-source-2"}},[e._v("#")]),e._v(" Data Source")]),e._v(" "),a("p",[e._v("The frontend is connected to the backend via a "),a("strong",[e._v("REST API")]),e._v(". The application uses an "),a("em",[e._v("HTTP-GET-Request")]),e._v(" in intervals of 60 seconds to check whether changes have been made to the data and renders only the components affected by the changes. The "),a("strong",[e._v("JSON")]),e._v(" ("),a("em",[e._v("JavaScript Object Notation")]),e._v(") data format is used for data exchange, since it supports good readability on the developer side and is independent of the script language on the machine side. Below is an excerpt from the JSON of a truck.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend12.png?raw=true",alt:"Horizon: Data Format"}})]),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("NOTE")]),e._v(": For more information about the data and its calculations, visit the "),a("em",[e._v("Backend")]),e._v(" section.")])]),e._v(" "),a("h1",{attrs:{id:"challenges"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#challenges"}},[e._v("#")]),e._v(" Challenges")]),e._v(" "),a("p",[e._v("During the development we were confronted with several "),a("strong",[e._v("challenges")]),e._v(". These can be grouped into challenges related to the "),a("strong",[e._v("business case")]),e._v(", challenges related to the "),a("strong",[e._v("architecture")]),e._v(" and last but not least challenges related to the "),a("strong",[e._v("presentation")]),e._v(" of the data. The most important of these are shown below.")]),e._v(" "),a("h3",{attrs:{id:"business-case"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#business-case"}},[e._v("#")]),e._v(" Business Case")]),e._v(" "),a("p",[e._v("During the development of the application we dealt iteratively with the following questions.")]),e._v(" "),a("ul",[a("li",[e._v("Which information is "),a("strong",[e._v("relevant")]),e._v(" for the target groups? Which information has a rather "),a("strong",[e._v("high priority")]),e._v(", which a rather "),a("strong",[e._v("low priority")]),e._v("?")]),e._v(" "),a("li",[e._v("Which "),a("strong",[e._v("main benefit")]),e._v(" should the application offer?")])]),e._v(" "),a("p",[e._v("Several wireframes were created during the development process. On the business case level the challenges mentioned so far were evaluated. In addition, the following question was also discussed:")]),e._v(" "),a("ul",[a("li",[e._v("Is it clearly "),a("strong",[e._v("communicable")]),e._v(" and "),a("strong",[e._v("plausible")]),e._v(" for the respective target group?")])]),e._v(" "),a("h3",{attrs:{id:"architecture"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#architecture"}},[e._v("#")]),e._v(" Architecture")]),e._v(" "),a("p",[e._v("The architecture of the application is complex, which resulted in immediate challenges for the development.")]),e._v(" "),a("p",[e._v("One challenge was the "),a("strong",[e._v("data connection")]),e._v(". Since we only deal with live data, a "),a("strong",[e._v("dummy pipeline")]),e._v(" had to be created to test the behaviour of the frontend in case of data changes.")]),e._v(" "),a("p",[e._v("In addition, a high degree of "),a("strong",[e._v("data consistency")]),e._v(" had to be guaranteed, since the target group in particular expects the data from the back end to be displayed in the front end "),a("strong",[e._v("without corruption")]),e._v(".")]),e._v(" "),a("p",[e._v("Furthermore, it could be determined that the application in a productive, deployed environment shows fundamental differences to the development environment in "),a("strong",[e._v("data retrieval")]),e._v(". Especially the asynchronous queries often led to "),a("strong",[e._v("unexpected")]),e._v(" "),a("a",{attrs:{href:"https://www.computerweekly.com/de/definition/Race-Condition",target:"_blank",rel:"noopener noreferrer"}},[e._v("race conditions"),a("OutboundLink")],1),e._v(" in the deployed state.")]),e._v(" "),a("p",[e._v("Last but not least, a "),a("strong",[e._v("constant exchange")]),e._v(" between backend and frontend developers was necessary, since even the smallest changes on the backend side could cause the frontend application to stop working. To ensure a certain degree of reliability, a "),a("strong",[e._v("data catalog")]),e._v(" was created in advance, which defines the "),a("strong",[e._v("name")]),e._v(", "),a("strong",[e._v("format")]),e._v(" and "),a("strong",[e._v("value range")]),e._v(" of every attribute.")]),e._v(" "),a("h3",{attrs:{id:"presentation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#presentation"}},[e._v("#")]),e._v(" Presentation")]),e._v(" "),a("p",[e._v("In close coordination with the backend, a lot of data was available which had to be mapped. The structuring and simultaneous translation of the data into "),a("strong",[e._v("user-friendly")]),e._v(" information proved to be a challenge. Thus, it had to be differentiated which information was "),a("strong",[e._v("relevant at first glance")]),e._v(" and which could be categorized as "),a("strong",[e._v("details")]),e._v(". Furthermore, a certain degree of "),a("strong",[e._v("liveliness")]),e._v(" of the information had to be introduced. Thus, the application should not only provide information and recommendations for action on the various trucks, but should also be "),a("strong",[e._v("fun to use")]),e._v(".")]),e._v(" "),a("p",[e._v("But also the development of the "),a("strong",[e._v("interactions")]),e._v(", in particular the development of the "),a("strong",[e._v("filters")]),e._v(", presented a challenge. The selection of a truck, as well as the change of the data in the background had a direct effect on all related components. For example, when a truck is selected in the "),a("em",[e._v("list of currently driving trucks")]),e._v(", it must be ensured that it is both highlighted on the map and its details are displayed in the detail view. At the same time it had to be intercepted that the selection of the truck crashes when the data in the background is changed.")]),e._v(" "),a("h2",{attrs:{id:"contributors-to-the-frontend"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contributors-to-the-frontend"}},[e._v("#")]),e._v(" Contributors to the Frontend")]),e._v(" "),a("p",[a("strong",[e._v("Anja Stütz")]),e._v(" and "),a("strong",[e._v("Sebastian Hermann")]),e._v(" were mainly involved in the development of the frontend.")]),e._v(" "),a("h3",{attrs:{id:"anja-stutz"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#anja-stutz"}},[e._v("#")]),e._v(" Anja Stütz")]),e._v(" "),a("p",[e._v("Information Science Student at the Stuttgart Media University.\nMail: as314@hdm-stuttgart.de\nGitHub: https://github.com/anjastvtz")]),e._v(" "),a("h3",{attrs:{id:"sebastian-hermann"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sebastian-hermann"}},[e._v("#")]),e._v(" Sebastian Hermann")]),e._v(" "),a("p",[e._v("Business Information Systems student at Stuttgart Media University.\nMail: sh267@hdm-stuttgart.de\nGitHub: https://github.com/SebastianHermann")]),e._v(" "),a("h1",{attrs:{id:"outlook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#outlook"}},[e._v("#")]),e._v(" Outlook")]),e._v(" "),a("p",[e._v("The current version of the app is the first, initial version (1.0) Further versions could contain the following features:")]),e._v(" "),a("ul",[a("li",[e._v("Introducing of the controller as a target group: here an additional\nview could show "),a("strong",[e._v("historical")]),e._v(", "),a("strong",[e._v("consolidated")]),e._v(" data from which medium to long-term "),a("strong",[e._v("strategic decisions")]),e._v(" could be made")]),e._v(" "),a("li",[e._v("Increase in the number of end devices: the application could be developed in the form of a "),a("strong",[e._v("mobile app")]),e._v(" so that the respective target groups can consume the information and recommendations for action on the trucks while on the move")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/frontend13.png?raw=true",alt:"Horizon: Outlook"}})]),e._v(" "),a("h1",{attrs:{id:"review-of-the-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#review-of-the-project"}},[e._v("#")]),e._v(" Review of the Project")]),e._v(" "),a("h2",{attrs:{id:"experience-documentation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#experience-documentation"}},[e._v("#")]),e._v(" Experience, Documentation")]),e._v(" "),a("ul",[a("li",[e._v("Begutachtung Gesamtprojekt")]),e._v(" "),a("li",[e._v("Lessons Learned")]),e._v(" "),a("li",[e._v("Was lief schief")]),e._v(" "),a("li",[e._v("Was lief gut")])])])}),[],!1,null,null,null);t.default=n.exports}}]);